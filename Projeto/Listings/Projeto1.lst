A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\Projeto1.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Pratica7 -lab1\Projeto1.a51 SET(SMALL) DEBUG PRINT(.\Listings\Projeto1.
                      lst) OBJECT(.\Objects\Projeto1.obj) EP

LOC  OBJ            LINE     SOURCE

0000                   1     org 00h
0000 D2A8              2     SETB EX0
0002 D289              3     SETB IE0
0004 020200            4     ljmp main
                       5     
                       6     ;Interrupcoes
0003                   7     ORG 03h
0003 20B2FD            8     check_sw1: jb sw1, check_sw1
0006 C2A8              9     clr EX0
0008 32               10     reti
                      11     
                      12     ;ORG 0bh
                      13     ;ljmp trata_timer
                      14                     
                      15     ;Inicio P0
  0080                16     dado  EQU               P0
                      17     ;Fim p0
                      18     
                      19     ;Inicio P2
  00A4                20     lin3  EQU               P2.4
  00A5                21     rs    EQU       P2.5    ;P3.4 alterna entre comando e dado (0-comando 1-dado) 
  00A6                22     rw        EQU           P2.6
  00A7                23     en    EQU       P2.7    ;P3.5 enable display
  0500                24     temp  EQU       0500h
                      25     ;Fim P2
                      26     
                      27     ;Inicio P3
  00B0                28     lin1  EQU               P3.0
  00B1                29     lin2  EQU               P3.1
  00B2                30     sw1       EQU       P3.2
  00B3                31     lin4  EQU               P3.3
  00B4                32     col1  EQU               P3.4
  00B5                33     col2  EQU               P3.5
  00B6                34     col3  EQU               P3.6
  00B7                35     col4  EQU               P3.7
                      36     ;Fim P3
                      37     
                      38     ;Mapeamento motor
  00A0                39     motor1 EQU P2.0
  00A1                40     motor2 EQU P2.1
  00A2                41     motor3 EQU P2.2
  00A3                42     motor4 EQU P2.3
                      43     
                      44     ;Inicio RAM
  007F                45     var1    EQU             07FH
  007E                46     var2    EQU             07eH
  007D                47     var3    EQU             07DH
  007C                48     var4    EQU             07CH
  007B                49     var5    EQU             07BH
  007A                50     var6    EQU             07AH
  0079                51     var7    EQU             079H
  0078                52     var8    EQU             078H
  0077                53     var9    EQU             077H
                      54     
                      55     ;-------------MAIN---------------
0200                  56     org 0200h
0200                  57     main:
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     2

0200 91BA             58     acall inidisp
0202 B102             59     acall msg_aguardando1
0204 B141             60     acall troca_para_L2
0206 B10A             61     acall msg_aguardando2
0208 75B0FF           62     mov P3, #11111111b
020B C2A0             63     clr P2.0
020D C2A1             64     clr P2.1
020F C2A2             65     clr P2.2
0211 C2A3             66     clr P2.3
0213 7D00             67     mov R5,#0h ;registrador que guarda o numero de voltas
0215                  68     lin_check:  
0215 D2A4             69                 setb lin3
0217 75B00F           70                             mov P3, #00001111b
021A 30B00B           71                             jnb lin1, L1_C_check
021D 30B11B           72                             jnb lin2, L2_C_check
0220 30A42B           73                             jnb lin3, L3_C_check
0223 30B33B           74                             jnb lin4, L4_C_check
0226 80ED             75                             jmp lin_check
0228                  76     L1_C_check: 
0228 C2A4             77                             clr lin3
022A 75B0F4           78                 mov P3, #11110100b
022D 30B45C           79                             jnb col1, bot_1_Ljmp
0230 30B561           80                             jnb col2, bot_2_Ljmp
0233 30B666           81                             jnb col3, bot_3_Ljmp
0236 30B73B           82                             jnb col4, bot_A_Ljmp
0239 80ED             83                             jmp L1_C_check
023B                  84     L2_C_check: 
023B C2A4             85                             clr lin3
023D 75B0F4           86                 mov P3, #11110100b
0240 30B461           87                             jnb col1, bot_4_Ljmp
0243 30B566           88                             jnb col2, bot_5_Ljmp
0246 30B66B           89                             jnb col3, bot_6_Ljmp
0249 30B730           90                             jnb col4, bot_B_Ljmp
024C 80ED             91                             jmp L2_C_check
024E                  92     L3_C_check:  
024E C2A4             93                             clr lin3
0250 75B0F4           94                 mov P3, #11110100b
0253 30B466           95                             jnb col1, bot_7_Ljmp
0256 30B56B           96                             jnb col2, bot_8_Ljmp
0259 30B670           97                             jnb col3, bot_9_Ljmp
025C 30B775           98                             jnb col4, bot_C_Ljmp
025F 80ED             99                             jmp L3_C_check
0261                 100     L4_C_check:  
0261 C2A4            101                             clr lin3
0263 75B0F4          102                 mov P3, #11110100b
0266 30B47B          103                             jnb col1, bot_AST_Ljmp
0269 30B518          104                             jnb col2, bot_0_Ljmp
026C 30B67D          105                             jnb col3, bot_HASH_Ljmp
026F 30B76A          106                             jnb col4, bot_D_Ljmp
0272 80ED            107                             jmp L4_C_check
0274                 108     bot_A_Ljmp:
0274 B152            109             acall delay2
0276 30B7FB          110             jnb col4, bot_A_Ljmp
0279 02030B          111             ljmp bot_A
027C                 112     bot_B_Ljmp:
027C B152            113             acall delay2
027E 30B7FB          114             jnb col4, bot_B_Ljmp
0281 02030E          115             ljmp bot_B
0284                 116     bot_0_Ljmp:
0284 B152            117         acall delay2
0286 30B5FB          118             jnb col2, bot_0_Ljmp
0289 020317          119             ljmp bot_0
028C                 120     bot_1_Ljmp:
028C B152            121         acall delay2
028E 30B4FB          122             jnb col1, bot_1_Ljmp
0291 020322          123             ljmp bot_1      
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     3

0294                 124     bot_2_Ljmp:
0294 B152            125             acall delay2
0296 30B5FB          126             jnb col2, bot_2_Ljmp
0299 02032D          127             ljmp bot_2
029C                 128     bot_3_Ljmp:
029C B152            129         acall delay2
029E 30B6FB          130             jnb col3, bot_3_Ljmp
02A1 020338          131             ljmp bot_3
02A4                 132     bot_4_Ljmp:
02A4 B152            133         acall delay2
02A6 30B4FB          134             jnb col1, bot_4_Ljmp
02A9 020343          135             ljmp bot_4
02AC                 136     bot_5_Ljmp:
02AC B152            137         acall delay2
02AE 30B5FB          138             jnb col2, bot_5_Ljmp
02B1 02034E          139             ljmp bot_5
02B4                 140     bot_6_Ljmp:
02B4 B152            141         acall delay2
02B6 30B6FB          142             jnb col3, bot_6_Ljmp
02B9 020359          143             ljmp bot_6
02BC                 144     bot_7_Ljmp:
02BC B152            145         acall delay2
02BE 30B4FB          146             jnb col1, bot_7_Ljmp
02C1 020364          147             ljmp bot_7
02C4                 148     bot_8_Ljmp:
02C4 B152            149         acall delay2
02C6 30B5FB          150             jnb col2, bot_8_Ljmp
02C9 02036F          151             ljmp bot_8
02CC                 152     bot_9_Ljmp:
02CC B152            153         acall delay2
02CE 30B6FB          154             jnb col3, bot_9_Ljmp
02D1 02037A          155             ljmp bot_9
02D4                 156     bot_C_Ljmp:
02D4 B152            157         acall delay2
02D6 30B7FB          158             jnb col4, bot_C_Ljmp
02D9 020311          159             ljmp bot_C
02DC                 160     bot_D_Ljmp:
02DC B152            161         acall delay2
02DE 30B7FB          162             jnb col4, bot_D_Ljmp
02E1 020314          163             ljmp bot_D
02E4                 164     bot_AST_Ljmp:
02E4 B152            165         acall delay2
02E6 30B4FB          166             jnb col1, bot_AST_Ljmp
02E9 020308          167             ljmp bot_AST
02EC                 168     bot_HASH_Ljmp:
02EC B152            169         acall delay2
02EE 30B6FB          170             jnb col3, bot_HASH_Ljmp
02F1 020385          171             ljmp bot_HASH
02F4                 172     check_ast:
02F4 D2A4            173             setb lin3
02F6 75B00F          174             mov P3, #00001111b
02F9 30B302          175             jnb lin4, L4_AST_check
02FC 80F6            176             jmp check_ast
02FE                 177     L4_AST_check:
02FE C2A4            178             clr lin3
0300 75B0F4          179             mov P3, #11110100b
0303 30B4DE          180             jnb col1, bot_AST_Ljmp
0306 80F6            181             jmp L4_AST_check
0308                 182     bot_AST:
0308 020200          183             ljmp main       
030B 020215          184     bot_A: ljmp lin_check
030E 020215          185     bot_B: ljmp lin_check
0311 020215          186     bot_C: ljmp lin_check
0314 020215          187     bot_D: ljmp lin_check
0317                 188     bot_0:  
0317 ED              189             mov A, R5
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     4

0318 75F00A          190             mov B, #10d
031B A4              191             mul AB
031C 2400            192             add A, #0d
031E FD              193             mov R5,A
031F 020215          194             ljmp lin_check
0322                 195     bot_1:
0322 ED              196             mov A, R5
0323 75F00A          197             mov B, #10d
0326 A4              198             mul AB
0327 2401            199             add A, #1d      
0329 FD              200             mov R5,A
032A 020215          201             ljmp lin_check
032D                 202     bot_2:
032D ED              203             mov A, R5
032E 75F00A          204             mov B, #10d
0331 A4              205             mul AB
0332 2402            206             add A, #2d
0334 FD              207             mov R5,A
0335 020215          208             ljmp lin_check
0338                 209     bot_3:
0338 ED              210             mov A, R5
0339 75F00A          211             mov B, #10d
033C A4              212             mul AB
033D 2403            213             add A, #3d
033F FD              214             mov R5,A
0340 020215          215             ljmp lin_check
0343                 216     bot_4:
0343 ED              217             mov A, R5
0344 75F00A          218             mov B, #10d
0347 A4              219             mul AB
0348 2404            220             add A, #4d
034A FD              221             mov R5,A
034B 020215          222             ljmp lin_check
034E                 223     bot_5:
034E ED              224             mov A, R5
034F 75F00A          225             mov B, #10d
0352 A4              226             mul AB
0353 2405            227             add A, #5d
0355 FD              228             mov R5,A
0356 020215          229             ljmp lin_check
0359                 230     bot_6:
0359 ED              231             mov A, R5
035A 75F00A          232             mov B, #10d
035D A4              233             mul AB
035E 2406            234             add A, #6d
0360 FD              235             mov R5,A
0361 020215          236             ljmp lin_check
0364                 237     bot_7:
0364 ED              238             mov A, R5
0365 75F00A          239             mov B, #10d
0368 A4              240             mul AB
0369 2407            241             add A, #7d
036B FD              242             mov R5,A
036C 020215          243             ljmp lin_check
036F                 244     bot_8:
036F ED              245             mov A, R5
0370 75F00A          246             mov B, #10d
0373 A4              247             mul AB
0374 2408            248             add A, #8d
0376 FD              249             mov R5,A
0377 020215          250             ljmp lin_check
037A                 251     bot_9:
037A ED              252             mov A, R5
037B 75F00A          253             mov B, #10d
037E A4              254             mul AB
037F 2409            255             add A, #9d
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     5

0381 FD              256             mov R5,A
0382 020215          257             ljmp lin_check
0385                 258     bot_HASH:
0385 BD0007          259             cjne R5,#0d,calcula_volta
0388 B11A            260             acall msg_inv
038A B164            261             acall delay1seg
038C 020200          262             ljmp main
038F                 263     calcula_volta:  
038F ED              264             mov A,R5
0390 75F0FF          265             mov B,#255d
0393 84              266             div AB
0394 700B            267             jnz check_sent
0396 E5F0            268             mov A,B
0398 7007            269             jnz check_sent
039A B11A            270             acall msg_inv
039C B164            271             acall delay1seg
039E 020200          272             ljmp main
03A1                 273     check_sent:
03A1 D2A4            274             setb lin3
03A3 75B00F          275             mov P3, #00001111b
03A6 30B005          276             jnb lin1, L1_A_check
03A9 30B10C          277             jnb lin2, L2_B_check
03AC 80F3            278             jmp check_sent
03AE                 279     L1_A_check:
03AE C2A4            280             clr lin3
03B0 75B0F4          281             mov P3, #11110100b
03B3 30B70C          282             jnb col4, bot_A_jmp
03B6 80F6            283             jmp L1_A_check
03B8                 284     L2_B_check:
03B8 C2A4            285             clr lin3
03BA 75B0F4          286             mov P3, #11110100b
03BD 30B70A          287             jnb col4, bot_B_jmp
03C0 80F6            288             jmp L2_B_check
03C2                 289     bot_A_jmp:
03C2 B152            290         acall delay2
03C4 30B7FB          291             jnb col4, bot_A_jmp
03C7 0203D2          292             ljmp bot_A2
03CA                 293     bot_B_jmp:
03CA B152            294         acall delay2
03CC 30B7FB          295             jnb col4, bot_B_jmp
03CF 0203D5          296             ljmp bot_B2
03D2                 297     bot_A2:
03D2 0203D8          298             ljmp sentido_horario
03D5                 299     bot_B2: 
03D5 0203E0          300             ljmp sentido_anti_horario
03D8                 301     sentido_horario:
03D8 71EF            302             acall imprime_voltas
03DA B112            303             acall msg_decrem
03DC 911E            304             acall passo_completo_horario
03DE DD08            305             djnz R5, imprime_fim
03E0                 306     sentido_anti_horario:
03E0 71EF            307             acall imprime_voltas
03E2 B112            308             acall msg_decrem
03E4 9141            309             acall passo_completo_anti_horario
03E6 DD00            310             djnz R5, imprime_fim
03E8                 311     imprime_fim:
03E8 B122            312             acall msg_end
03EA B164            313             acall delay1seg
03EC 0202F4          314             ljmp check_ast
03EF                 315     imprime_voltas:
03EF ED              316     mov A,R5
03F0 75F064          317             mov B,#100
03F3 84              318             div AB
                     319             
03F4 FC              320             mov R4,A
03F5 A8F0            321             mov R0,B
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     6

                     322             
03F7 E8              323             mov A,R0
03F8 75F00A          324             mov B,#10
03FB 84              325             div AB
                     326             
03FC FB              327             mov R3,A
03FD AAF0            328             mov R2,B
                     329             
03FF EC              330             mov A,R4
0400 2430            331             add A,#30h
0402 FC              332             mov R4,A
                     333             
0403 EB              334             mov A,R3
0404 2430            335             add A,#30h
0406 FB              336             mov R3,A
                     337             
0407 EA              338             mov A,R2
0408 2430            339             add A,#30h
040A FA              340             mov R2,A
                     341             
040B 8C80            342             mov dado, R4
040D 91E8            343             aCALL dadodisp
040F B152            344             acall delay2
                     345             
0411 8B80            346             mov dado, R3
0413 91E8            347             aCALL dadodisp
0415 B152            348             acall delay2
                     349             
0417 8A80            350             mov dado, R2
0419 91E8            351             aCALL dadodisp
041B B152            352             acall delay2
                     353             
041D 22              354             ret
                     355     
                     356     ;##########################################
041E                 357     passo_completo_horario:
041E B15B            358         acall delay_step_motor
0420 C2A0            359         clr P2.0
0422 C2A1            360         clr P2.1
0424 C2A2            361         clr P2.2
0426 C2A3            362         clr P2.3
                     363         ;0001
0428 B15B            364         acall delay_step_motor
042A C2A0            365         clr P2.0
042C D2A3            366         setb P2.3
                     367         ;0010
042E B15B            368         acall delay_step_motor
0430 C2A3            369         clr P2.3
0432 D2A2            370         setb P2.2
                     371         ;0100
0434 B15B            372         acall delay_step_motor
0436 C2A2            373         clr P2.2
0438 D2A1            374         setb P2.1
                     375         ;1000
043A B15B            376         acall delay_step_motor
043C C2A1            377         clr P2.1
043E D2A0            378         setb P2.0
0440 22              379         ret
0441                 380     passo_completo_anti_horario:
0441 B15B            381         acall delay_step_motor
0443 C2A0            382         clr P2.0
0445 C2A1            383         clr P2.1
0447 C2A2            384         clr P2.2
0449 C2A3            385         clr P2.3
                     386         ;1000
044B B15B            387         acall delay_step_motor
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     7

044D C2A3            388         clr P2.3
044F D2A0            389         setb P2.0
                     390         ;0100
0451 B15B            391         acall delay_step_motor
0453 C2A0            392         clr P2.0
0455 D2A1            393         setb P2.1
                     394         ;0010
0457 B15B            395         acall delay_step_motor
0459 C2A1            396         clr P2.1
045B D2A2            397         setb P2.2
                     398         ;0001
045D B15B            399         acall delay_step_motor
045F C2A2            400         clr P2.2
0461 D2A3            401         setb P2.3
0463 22              402         ret
0464                 403     meio_passo_horario:
0464 B15B            404         acall delay_step_motor
0466 C2A0            405         clr P2.0
0468 C2A1            406         clr P2.1
046A C2A2            407         clr P2.2
046C C2A3            408         clr P2.3
                     409         ;0001
046E B15B            410         acall delay_step_motor
0470 D2A3            411         setb P2.3
                     412         ;0011
0472 B15B            413         acall delay_step_motor
0474 D2A2            414         setb P2.2
                     415         ;0010
0476 B15B            416         acall delay_step_motor
0478 C2A3            417         CLR P2.3
                     418         ;0110
047A B15B            419         acall delay_step_motor
047C D2A1            420         SETB P2.1
                     421         ;0100
047E B15B            422         acall delay_step_motor
0480 C2A2            423         CLR P2.2
                     424         ;1100
0482 B15B            425         acall delay_step_motor
0484 D2A0            426         SETB P2.0
                     427         ;1000
0486 B15B            428         acall delay_step_motor
0488 C2A1            429         CLR P2.1
                     430         ;1001
048A B15B            431         acall delay_step_motor
048C D2A3            432         SETB P2.3
048E 22              433             ret
048F                 434     meio_passo_anti_horario:
048F B15B            435         acall delay_step_motor
0491 C2A0            436         clr P2.0
0493 C2A1            437         clr P2.1
0495 C2A2            438         clr P2.2
0497 C2A3            439         clr P2.3
                     440         ;1000
0499 B15B            441         acall delay_step_motor
049B D2A0            442         SETB P2.0
                     443         ;1100
049D B15B            444         acall delay_step_motor
049F D2A1            445         SETB P2.1
                     446         ;0100
04A1 B15B            447         acall delay_step_motor
04A3 C2A0            448         CLR P2.0
                     449         ;0110
04A5 B15B            450         acall delay_step_motor
04A7 D2A2            451         SETB P2.2
                     452         ;0010
04A9 B15B            453         acall delay_step_motor
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     8

04AB C2A1            454         CLR P2.1
                     455         ;0011
04AD B15B            456         acall delay_step_motor
04AF D2A3            457         SETB P2.3
                     458         ;0001
04B1 B15B            459         acall delay_step_motor
04B3 C2A2            460         CLR P2.2
                     461         ;1001
04B5 B15B            462         acall delay_step_motor
04B7 D2A0            463         SETB P2.0
04B9 22              464             ret
                     465     ;##########################################
                     466     
04BA 758038          467     inidisp:    mov dado,#38h
                     468                             ;mov dado,#3ch
04BD 91F5            469                 CALL comdisp
04BF B152            470                             call delay2
04C1 B152            471                             call delay2
04C3 758038          472                             mov dado,#38h
                     473                             ;mov dado,#3ch
04C6 91F5            474                 CALL comdisp
04C8 B152            475                             call delay2
04CA B152            476                             call delay2
04CC 758006          477                             MOV dado,#06h
04CF 91F5            478                 CALL comdisp
04D1 B152            479                         call delay2
04D3 B152            480                             call delay2
04D5 75800E          481                             MOV dado,#0eh
04D8 91F5            482                 CALL comdisp
04DA B152            483                             call delay2
04DC B152            484                             call delay2
04DE 758001          485                             MOV dado,#01H
04E1 91F5            486                             CALL comdisp
04E3 B152            487                             call delay2
04E5 B152            488                             call delay2
04E7 22              489                 RET
                     490     
04E8 C2A7            491     dadodisp:   clr  en
04EA C2A6            492                             clr rw
04EC D2A5            493                 setb rs
04EE D2A7            494                 setb en
04F0 B149            495                 call delay
04F2 C2A7            496                 clr  en
04F4 22              497                 ret
                     498     
04F5 C2A7            499     comdisp:    clr  en
04F7 C2A6            500                     clr rw
04F9 C2A5            501                         clr  rs
04FB D2A7            502                 setb en
04FD B149            503                 call delay
04FF C2A7            504                 clr  en
0501 22              505                 ret
                     506     
0502                 507     msg_aguardando1:
0502 900900          508                             mov  dptr, #mensagem_aguardando_L1
0505 7C10            509                 mov r4, #016d
0507 8029            510                             jmp msg
0509 22              511                             ret
                     512                             
050A                 513     msg_aguardando2:
050A 900911          514                             mov  dptr, #mensagem_aguardando_L2
050D 7C10            515                 mov r4, #016d
050F 8021            516                             jmp msg
0511 22              517                             ret
                     518     
0512                 519     msg_decrem:
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE     9

0512 900933          520                             mov  dptr, #mensagem_decrementando
0515 7C10            521                 mov r4, #016d
0517 8019            522                             jmp msg
0519 22              523                             ret
                     524                             
051A                 525     msg_inv:
051A 900922          526                             mov  dptr, #mensagem_invalido
051D 7C10            527                 mov r4, #016d
051F 8011            528                             jmp msg
0521 22              529                             ret
                     530     
0522                 531     msg_end:
0522 900941          532                             mov  dptr, #mensagem_fim
0525 7C10            533                 mov r4, #016d
0527 8009            534                             jmp msg
0529 22              535                             ret
                     536     
052A                 537     msg_int:
052A 90094B          538                             mov  dptr, #mensagem_interrupcao
052D 7C10            539                 mov r4, #016d
052F 8001            540                             jmp msg
0531 22              541                             ret
                     542     
0532 E4              543     msg:    clr a
0533 93              544                     movc  a,@a+dptr
0534 F580            545                     mov dado,a
0536 91E8            546                     call dadodisp
0538 B152            547                     call delay2
053A A3              548                     inc dptr
053B E4              549                     clr a
053C 93              550                     movc  a,@a+dptr
053D B400F2          551                     cjne a, #00h, msg
0540 22              552                     ret                             
                     553     
0541                 554     troca_para_L2:
0541 7580C0          555                                 mov dado, #0c0h
0544 91F5            556                                     aCALL comdisp
0546 B152            557                                     acall delay2
0548 22              558                                 ret
                     559     
                     560     ;delay_exemplo: SETB ET0
                     561     ;               MOV TMOD, #01h
                     562     ;               MOV TH0, #0FFh
                     563     ;               MOV TL0, #007h
                     564     ;               SETB EA
                     565     ;               setb delay1_var
                     566     ;               SETB TR0
                     567     ;wait1_exemplo:  jnb delay1_var, wait1
                     568     ;               ret
                     569                     
0549 7E0F            570     delay:      mov r6,#0FH
054B 7F0F            571     loop:           mov r7, #0FH
054D DFFE            572                             djnz r7,$
054F DEFA            573                             djnz r6, loop
0551 22              574                             ret
                     575                                
0552 7EFF            576     delay2:     mov r6,#0FFH
0554 7FFF            577     loop2:          mov r7, #0FFH
0556 DFFE            578                             djnz r7,$
0558 DEFA            579                             djnz r6, loop2
055A 22              580                             ret
                     581                             
055B                 582     delay_step_motor:      
055B 7E0F            583                             mov r6,#0FH
055D 7F0F            584     loop3:          mov r7, #0FH
055F DFFE            585                             djnz r7,$
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE    10

0561 DEE8            586                             djnz r6, loop
0563 22              587                             ret
                     588                             
0564                 589     delay1seg:
0564 7FFA            590             MOV R7, #250d
0566 7EFA            591             MOV R6, #250d
0568 7908            592             MOV R1, #8d
056A                 593             aux_2:
056A 7EFA            594                     MOV R6, #250d
056C                 595             aux_1:
056C 7FFA            596                     MOV R7, #250d
056E                 597             aux_0:
056E DFFE            598                     DJNZ R7, aux_0
0570 DEFA            599                     DJNZ R6, aux_1
0572 D9F6            600                     DJNZ R1, aux_2
0574 22              601             ret
                     602             
                     603     ;org 0500h
                     604     ;trata_timer:
                     605     ;       jnb delay1_var, delay2_inter
                     606     ;       delay1_inter:   clr ea
                     607     ;                                       clr delay1_var
                     608     ;                                       reti
                     609     ;       delay2_inter:
                     610     ;                                       jnb delay2_var, end_timer
                     611     ;                                       clr ea
                     612     ;                                       clr delay2_var
                     613     ;                                       reti                    
                     614     ;       end_timer:
                     615     ;                       reti
                     616     
0900                 617     org 0900h
                     618     ;Mensagens com amor
0900 44696769        619     mensagem_aguardando_L1: DB "Digite qtas volt",0
0904 74652071                
0908 74617320                
090C 766F6C74                
0910 00                      
0911 61732065        620     mensagem_aguardando_L2: DB "as e o sentido: ",0 
0915 206F2073                
0919 656E7469                
091D 646F3A20                
0921 00                      
0922 56616C6F        621     mensagem_invalido: DB "Valor invalido  ",0
0926 7220696E                
092A 76616C69                
092E 646F2020                
0932 00                      
0933 20706172        622     mensagem_decrementando: DB " para acabar.",0 ;IE: 255 para acabar.
0937 61206163                
093B 61626172                
093F 2E00                    
0941 20202020        623     mensagem_FIM: DB "      FIM",0
0945 20204649                
0949 4D00                    
094B 494E5445        624     mensagem_interrupcao: DB "INTERROMPIDO."
094F 52524F4D                
0953 5049444F                
0957 2E                      
                     625     END
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE    11

SYMBOL TABLE LISTING
------ ----- -------


N A M E                      T Y P E  V A L U E   ATTRIBUTES

AUX_0 . . . . . . . . . . .  C ADDR   056EH   A   
AUX_1 . . . . . . . . . . .  C ADDR   056CH   A   
AUX_2 . . . . . . . . . . .  C ADDR   056AH   A   
B . . . . . . . . . . . . .  D ADDR   00F0H   A   
BOT_0 . . . . . . . . . . .  C ADDR   0317H   A   
BOT_0_LJMP. . . . . . . . .  C ADDR   0284H   A   
BOT_1 . . . . . . . . . . .  C ADDR   0322H   A   
BOT_1_LJMP. . . . . . . . .  C ADDR   028CH   A   
BOT_2 . . . . . . . . . . .  C ADDR   032DH   A   
BOT_2_LJMP. . . . . . . . .  C ADDR   0294H   A   
BOT_3 . . . . . . . . . . .  C ADDR   0338H   A   
BOT_3_LJMP. . . . . . . . .  C ADDR   029CH   A   
BOT_4 . . . . . . . . . . .  C ADDR   0343H   A   
BOT_4_LJMP. . . . . . . . .  C ADDR   02A4H   A   
BOT_5 . . . . . . . . . . .  C ADDR   034EH   A   
BOT_5_LJMP. . . . . . . . .  C ADDR   02ACH   A   
BOT_6 . . . . . . . . . . .  C ADDR   0359H   A   
BOT_6_LJMP. . . . . . . . .  C ADDR   02B4H   A   
BOT_7 . . . . . . . . . . .  C ADDR   0364H   A   
BOT_7_LJMP. . . . . . . . .  C ADDR   02BCH   A   
BOT_8 . . . . . . . . . . .  C ADDR   036FH   A   
BOT_8_LJMP. . . . . . . . .  C ADDR   02C4H   A   
BOT_9 . . . . . . . . . . .  C ADDR   037AH   A   
BOT_9_LJMP. . . . . . . . .  C ADDR   02CCH   A   
BOT_A . . . . . . . . . . .  C ADDR   030BH   A   
BOT_A2. . . . . . . . . . .  C ADDR   03D2H   A   
BOT_AST . . . . . . . . . .  C ADDR   0308H   A   
BOT_AST_LJMP. . . . . . . .  C ADDR   02E4H   A   
BOT_A_JMP . . . . . . . . .  C ADDR   03C2H   A   
BOT_A_LJMP. . . . . . . . .  C ADDR   0274H   A   
BOT_B . . . . . . . . . . .  C ADDR   030EH   A   
BOT_B2. . . . . . . . . . .  C ADDR   03D5H   A   
BOT_B_JMP . . . . . . . . .  C ADDR   03CAH   A   
BOT_B_LJMP. . . . . . . . .  C ADDR   027CH   A   
BOT_C . . . . . . . . . . .  C ADDR   0311H   A   
BOT_C_LJMP. . . . . . . . .  C ADDR   02D4H   A   
BOT_D . . . . . . . . . . .  C ADDR   0314H   A   
BOT_D_LJMP. . . . . . . . .  C ADDR   02DCH   A   
BOT_HASH. . . . . . . . . .  C ADDR   0385H   A   
BOT_HASH_LJMP . . . . . . .  C ADDR   02ECH   A   
CALCULA_VOLTA . . . . . . .  C ADDR   038FH   A   
CHECK_AST . . . . . . . . .  C ADDR   02F4H   A   
CHECK_SENT. . . . . . . . .  C ADDR   03A1H   A   
CHECK_SW1 . . . . . . . . .  C ADDR   0003H   A   
COL1. . . . . . . . . . . .  B ADDR   00B0H.4 A   
COL2. . . . . . . . . . . .  B ADDR   00B0H.5 A   
COL3. . . . . . . . . . . .  B ADDR   00B0H.6 A   
COL4. . . . . . . . . . . .  B ADDR   00B0H.7 A   
COMDISP . . . . . . . . . .  C ADDR   04F5H   A   
DADO. . . . . . . . . . . .  D ADDR   0080H   A   
DADODISP. . . . . . . . . .  C ADDR   04E8H   A   
DELAY . . . . . . . . . . .  C ADDR   0549H   A   
DELAY1SEG . . . . . . . . .  C ADDR   0564H   A   
DELAY2. . . . . . . . . . .  C ADDR   0552H   A   
DELAY_STEP_MOTOR. . . . . .  C ADDR   055BH   A   
EN. . . . . . . . . . . . .  B ADDR   00A0H.7 A   
EX0 . . . . . . . . . . . .  B ADDR   00A8H.0 A   
IE0 . . . . . . . . . . . .  B ADDR   0088H.1 A   
IMPRIME_FIM . . . . . . . .  C ADDR   03E8H   A   
IMPRIME_VOLTAS. . . . . . .  C ADDR   03EFH   A   
A51 MACRO ASSEMBLER  PROJETO1                                                             05/22/2018 00:50:58 PAGE    12

INIDISP . . . . . . . . . .  C ADDR   04BAH   A   
L1_A_CHECK. . . . . . . . .  C ADDR   03AEH   A   
L1_C_CHECK. . . . . . . . .  C ADDR   0228H   A   
L2_B_CHECK. . . . . . . . .  C ADDR   03B8H   A   
L2_C_CHECK. . . . . . . . .  C ADDR   023BH   A   
L3_C_CHECK. . . . . . . . .  C ADDR   024EH   A   
L4_AST_CHECK. . . . . . . .  C ADDR   02FEH   A   
L4_C_CHECK. . . . . . . . .  C ADDR   0261H   A   
LIN1. . . . . . . . . . . .  B ADDR   00B0H.0 A   
LIN2. . . . . . . . . . . .  B ADDR   00B0H.1 A   
LIN3. . . . . . . . . . . .  B ADDR   00A0H.4 A   
LIN4. . . . . . . . . . . .  B ADDR   00B0H.3 A   
LIN_CHECK . . . . . . . . .  C ADDR   0215H   A   
LOOP. . . . . . . . . . . .  C ADDR   054BH   A   
LOOP2 . . . . . . . . . . .  C ADDR   0554H   A   
LOOP3 . . . . . . . . . . .  C ADDR   055DH   A   
MAIN. . . . . . . . . . . .  C ADDR   0200H   A   
MEIO_PASSO_ANTI_HORARIO . .  C ADDR   048FH   A   
MEIO_PASSO_HORARIO. . . . .  C ADDR   0464H   A   
MENSAGEM_AGUARDANDO_L1. . .  C ADDR   0900H   A   
MENSAGEM_AGUARDANDO_L2. . .  C ADDR   0911H   A   
MENSAGEM_DECREMENTANDO. . .  C ADDR   0933H   A   
MENSAGEM_FIM. . . . . . . .  C ADDR   0941H   A   
MENSAGEM_INTERRUPCAO. . . .  C ADDR   094BH   A   
MENSAGEM_INVALIDO . . . . .  C ADDR   0922H   A   
MOTOR1. . . . . . . . . . .  B ADDR   00A0H.0 A   
MOTOR2. . . . . . . . . . .  B ADDR   00A0H.1 A   
MOTOR3. . . . . . . . . . .  B ADDR   00A0H.2 A   
MOTOR4. . . . . . . . . . .  B ADDR   00A0H.3 A   
MSG . . . . . . . . . . . .  C ADDR   0532H   A   
MSG_AGUARDANDO1 . . . . . .  C ADDR   0502H   A   
MSG_AGUARDANDO2 . . . . . .  C ADDR   050AH   A   
MSG_DECREM. . . . . . . . .  C ADDR   0512H   A   
MSG_END . . . . . . . . . .  C ADDR   0522H   A   
MSG_INT . . . . . . . . . .  C ADDR   052AH   A   
MSG_INV . . . . . . . . . .  C ADDR   051AH   A   
P0. . . . . . . . . . . . .  D ADDR   0080H   A   
P2. . . . . . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . . . . . .  D ADDR   00B0H   A   
PASSO_COMPLETO_ANTI_HORARIO  C ADDR   0441H   A   
PASSO_COMPLETO_HORARIO. . .  C ADDR   041EH   A   
RS. . . . . . . . . . . . .  B ADDR   00A0H.5 A   
RW. . . . . . . . . . . . .  B ADDR   00A0H.6 A   
SENTIDO_ANTI_HORARIO. . . .  C ADDR   03E0H   A   
SENTIDO_HORARIO . . . . . .  C ADDR   03D8H   A   
SW1 . . . . . . . . . . . .  B ADDR   00B0H.2 A   
TEMP. . . . . . . . . . . .  N NUMB   0500H   A   
TROCA_PARA_L2 . . . . . . .  C ADDR   0541H   A   
VAR1. . . . . . . . . . . .  N NUMB   007FH   A   
VAR2. . . . . . . . . . . .  N NUMB   007EH   A   
VAR3. . . . . . . . . . . .  N NUMB   007DH   A   
VAR4. . . . . . . . . . . .  N NUMB   007CH   A   
VAR5. . . . . . . . . . . .  N NUMB   007BH   A   
VAR6. . . . . . . . . . . .  N NUMB   007AH   A   
VAR7. . . . . . . . . . . .  N NUMB   0079H   A   
VAR8. . . . . . . . . . . .  N NUMB   0078H   A   
VAR9. . . . . . . . . . . .  N NUMB   0077H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
